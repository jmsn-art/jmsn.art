<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Make an Art Circle – jmsn.art</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">

  <!-- Canonical -->
  <link rel="canonical" href="https://jmsn.art/make.html">

  <!-- SEO -->
  <meta name="description" content="Create your own minimal Art Circle: adjust radius, broken gap, glow, colors, and download a PNG.">
  <meta name="author" content="Jameson McShane">

  <!-- Open Graph -->
  <meta property="og:title" content="Make an Art Circle – jmsn.art">
  <meta property="og:description" content="Interactive canvas to design minimal Art Circles with a broken halo.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://jmsn.art/make.html">

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FQPZNDPCGF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config', 'G-FQPZNDPCGF');
  </script>

  <style>
    :root{
      --bg:#111; --fg:#fff; --muted:#9a9a9a; --panel:#181818; --line:#2a2a2a;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font-family:Arial,Helvetica,sans-serif; line-height:1.35;
      display:flex; flex-direction:column;
    }
    header,footer{
      padding:14px 18px; opacity:.9;
      display:flex; align-items:center; justify-content:space-between;
    }
    header a, footer a{color:var(--fg); text-decoration:underline}
    .wrap{
      display:grid; grid-template-columns:1fr; gap:14px; padding:14px;
    }
    .canvas-wrap{
      background:#0d0d0d; border:1px solid var(--line); border-radius:10px;
      display:flex; align-items:center; justify-content:center; min-height:50vh;
    }
    canvas{max-width:100%; height:auto; background:transparent}
    .controls{
      background:var(--panel); border:1px solid var(--line); border-radius:12px;
      padding:12px; display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px;
    }
    .grp{display:flex; flex-direction:column; gap:6px}
    .grp label{font-size:.9rem; color:var(--muted)}
    .row{display:flex; gap:8px; align-items:center}
    input[type="range"]{width:100%}
    button{
      background:#1b1b1b; color:#fff; border:1px solid var(--line);
      padding:10px 12px; border-radius:999px; cursor:pointer;
    }
    button:hover{border-color:#777}
    .inline{display:flex; gap:10px; flex-wrap:wrap}
    .hint{font-size:.85rem; color:var(--muted)}
    @media (min-width: 980px){
      .wrap{grid-template-columns:1fr 360px}
      .controls{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <div>Make an Art Circle</div>
    <nav class="inline">
      <a href="/">Gallery</a>
      <a href="/about.html">About</a>
      <a href="/contact.html">Contact</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="canvas-wrap">
      <!-- High-res drawing surface; scaled for crisp export -->
      <canvas id="art" width="1600" height="1600" aria-label="Art Circle canvas"></canvas>
    </section>

    <aside class="controls" aria-label="Art Circle controls">
      <div class="grp">
        <label for="bg">Background</label>
        <div class="row">
          <input type="color" id="bg" value="#111111" />
          <span class="hint">Page background</span>
        </div>
      </div>

      <div class="grp">
        <label for="stroke">Circle Stroke Color</label>
        <div class="row">
          <input type="color" id="stroke" value="#d4af37" />
          <span class="hint">Gold by default</span>
        </div>
      </div>

      <div class="grp">
        <label for="fill">Glow / Fill Color</label>
        <div class="row">
          <input type="color" id="fill" value="#d4af37" />
          <span class="hint">Used for glow + optional fill</span>
        </div>
      </div>

      <div class="grp">
        <label>Radii</label>
        <div class="row"><input type="range" id="outerR" min="200" max="750" value="520"><span class="hint">Outer radius</span></div>
        <div class="row"><input type="range" id="innerR" min="0" max="400" value="0"><span class="hint">Inner radius (0 = ring)</span></div>
      </div>

      <div class="grp">
        <label>Stroke & Glow</label>
        <div class="row"><input type="range" id="strokeW" min="1" max="80" value="12"><span class="hint">Stroke width</span></div>
        <div class="row"><input type="range" id="glow" min="0" max="80" value="28"><span class="hint">Glow strength</span></div>
      </div>

      <div class="grp">
        <label>Broken Gap & Rotation</label>
        <div class="row"><input type="range" id="gap" min="0" max="180" value="40"><span class="hint">Gap (degrees)</span></div>
        <div class="row"><input type="range" id="rot" min="0" max="359" value="0"><span class="hint">Rotate (°)</span></div>
      </div>

      <div class="grp">
        <label>Texture Speckle</label>
        <div class="row"><input type="range" id="speckle" min="0" max="2000" value="250"><span class="hint">0 = off</span></div>
      </div>

      <div class="grp">
        <label>Actions</label>
        <div class="inline">
          <button id="random">Randomize (R)</button>
          <button id="download">Download PNG (D)</button>
          <button id="clear">Reset</button>
        </div>
        <div class="hint">Tips: ←/→ rotate, R randomize, D download</div>
      </div>
    </aside>
  </main>

  <footer>
    © 2025 Jameson McShane · <a href="/">jmsn.art</a>
  </footer>

  <script>
    const $ = id => document.getElementById(id);
    const cfg = {
      bg:   $('bg'), stroke: $('stroke'), fill: $('fill'),
      outerR:$('outerR'), innerR:$('innerR'), strokeW:$('strokeW'),
      glow: $('glow'), gap: $('gap'), rot: $('rot'), speckle:$('speckle'),
      random:$('random'), download:$('download'), clear:$('clear'),
      canvas:$('art')
    };
    const ctx = cfg.canvas.getContext('2d');

    function hsla(h,s,l,a=1){ return `hsla(${h} ${s}% ${l}% / ${a})`; }

    function resizeToDisplay() {
      // Fit canvas to container CSS size while keeping internal 1600x1600 resolution
      const box = cfg.canvas.parentElement.getBoundingClientRect();
      const side = Math.min(box.width, box.height || box.width);
      cfg.canvas.style.width = side + 'px';
      cfg.canvas.style.height = side + 'px';
    }
    window.addEventListener('resize', resizeToDisplay);

    function clear() {
      ctx.save();
      ctx.fillStyle = cfg.bg.value;
      ctx.fillRect(0,0,cfg.canvas.width,cfg.canvas.height);
      ctx.restore();
    }

    function drawSpeckle(amount) {
      if (amount <= 0) return;
      const w = cfg.canvas.width, h = cfg.canvas.height;
      ctx.save();
      ctx.globalAlpha = 0.08;
      ctx.fillStyle = '#000';
      for (let i=0;i<amount;i++){
        const x = Math.random()*w, y=Math.random()*h;
        const r = Math.random()*1.4;
        ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
      }
      ctx.restore();
    }

    function draw() {
      clear();
      const cx = cfg.canvas.width/2, cy = cfg.canvas.height/2;

      const outerR = +cfg.outerR.value;
      const innerR = +cfg.innerR.value; // 0 for ring
      const strokeW = +cfg.strokeW.value;
      const glow = +cfg.glow.value;
      const gapDeg = +cfg.gap.value;
      const rotDeg = +cfg.rot.value;

      const start = ((rotDeg + gapDeg/2) * Math.PI)/180;
      const end   = ((rotDeg + 360 - gapDeg/2) * Math.PI)/180;

      // Outer ring (with gap)
      ctx.save();
      ctx.translate(cx, cy);

      // Glow
      ctx.shadowColor = cfg.fill.value;
      ctx.shadowBlur = glow;

      ctx.lineCap = 'round';
      ctx.strokeStyle = cfg.stroke.value;
      ctx.lineWidth = strokeW;

      ctx.beginPath();
      ctx.arc(0,0,outerR, start, end, false);
      ctx.stroke();

      // Optional filled disk if innerR > 0
      if (innerR > 0) {
        ctx.shadowBlur = glow * 0.6;
        ctx.fillStyle = cfg.fill.value;
        ctx.beginPath();
        ctx.arc(0,0,innerR,0,Math.PI*2);
        ctx.fill();
      }
      ctx.restore();

      drawSpeckle(+cfg.speckle.value);
    }

    function randomize() {
      // Dark background hues near black
      const darks = ['#0f0f10','#101112','#0e0e0e','#111111'];
      cfg.bg.value = darks[(Math.random()*darks.length)|0];

      // Gold/amber/white strokes, occasionally icy
      const palette = ['#d4af37','#f5e6a7','#ffffff','#f1c27d','#c9b037','#e6d8ad','#c0c0c0','#9ad7ff'];
      const stroke = palette[(Math.random()*palette.length)|0];
      cfg.stroke.value = stroke;
      cfg.fill.value = stroke;

      cfg.outerR.value = 420 + Math.floor(Math.random()*240);
      cfg.innerR.value = (Math.random() < 0.25) ? 0 : 80 + Math.floor(Math.random()*200);
      cfg.strokeW.value = 6 + Math.floor(Math.random()*36);
      cfg.glow.value = 10 + Math.floor(Math.random()*60);
      cfg.gap.value = Math.floor(Math.random()*140); // 0-140 deg gap
      cfg.rot.value = Math.floor(Math.random()*360);
      cfg.speckle.value = (Math.random()<0.5) ? Math.floor(Math.random()*800) : 0;

      draw();
    }

    function downloadPNG() {
      // Create a temporary canvas without CSS scaling for crisp export
      const link = document.createElement('a');
      link.download = `art-circle-${Date.now()}.png`;
      link.href = cfg.canvas.toDataURL('image/png');
      link.click();
    }

    function resetAll() {
      cfg.bg.value = '#111111';
      cfg.stroke.value = '#d4af37';
      cfg.fill.value = '#d4af37';
      cfg.outerR.value = 520;
      cfg.innerR.value = 0;
      cfg.strokeW.value = 12;
      cfg.glow.value = 28;
      cfg.gap.value = 40;
      cfg.rot.value = 0;
      cfg.speckle.value = 250;
      draw();
    }

    // Bind controls
    ['bg','stroke','fill','outerR','innerR','strokeW','glow','gap','rot','speckle']
      .forEach(id => $(id).addEventListener('input', draw));

    cfg.random.addEventListener('click', randomize);
    cfg.download.addEventListener('click', downloadPNG);
    cfg.clear.addEventListener('click', resetAll);

    // Keys: R randomize, D download, arrows rotate
    window.addEventListener('keydown', (e) => {
      if (e.key==='r' || e.key==='R') { randomize(); }
      if (e.key==='d' || e.key==='D') { downloadPNG(); }
      if (e.key==='ArrowLeft')  { cfg.rot.value = (+cfg.rot.value + 357) % 360; draw(); }
      if (e.key==='ArrowRight') { cfg.rot.value = (+cfg.rot.value + 3) % 360; draw(); }
    });

    // Init
    resizeToDisplay();
    resetAll();
    window.addEventListener('resize', draw);
  </script>
</body>
</html>
