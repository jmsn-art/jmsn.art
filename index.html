<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Robots -->
  <meta name="robots" content="index,follow,max-image-preview:large">

  <!-- (Optional) Google Search Console verification -->
  <meta name="google-site-verification" content="DCp-0ee_YelzAvSTWw4qI5o1S_DTUAVLVQi88xirPj0" />

  <!-- JSON-LD: Site + Artist (linked via @id) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "@id": "https://jmsn.art/#website",
    "name": "jmsn.art – The Art Circle Project by Jameson McShane",
    "url": "https://jmsn.art/",
    "publisher": { "@id": "https://jmsn.art/#person" },
    "inLanguage": "en-US",
    "potentialAction": { "@type": "ViewAction", "target": "https://jmsn.art/" }
  }
  </script>

  <!-- JSON-LD: Person -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "@id": "https://jmsn.art/#person",
    "name": "Jameson McShane",
    "url": "https://jmsn.art/about.html",
    "image": "https://jmsn.art/images/file_000001_1200x1200.jpg",
    "description": "Artist exploring art circles (halos/broken circles) via digital/AI collaboration with chatJMSN."
  }
  </script>

  <!-- JSON-LD: Collection of Artworks / Gallery Page (sampled; not exhaustive) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "@id": "https://jmsn.art/#gallery",
    "name": "The Art Circle Gallery by Jameson McShane",
    "url": "https://jmsn.art/",
    "isPartOf": { "@id": "https://jmsn.art/#website" },
    "about": { "@id": "https://jmsn.art/#person" },
    "hasPart": [
      { "@type": "ImageObject", "name": "Haloed Figure in Black and White by Jameson McShane", "contentUrl": "https://jmsn.art/images/File%2000001.jpeg" },
      { "@type": "ImageObject", "name": "Human and Robot, Contrasting Forces by Jameson McShane", "contentUrl": "https://jmsn.art/images/File%2000002.jpeg" },
      { "@type": "ImageObject", "name": "Leaky Bucket with Water Spill by Jameson McShane", "contentUrl": "https://jmsn.art/images/File%2000003.jpeg" }
    ]
  }
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>jmsn.art – The Art Circle Project by Jameson McShane</title>

  <!-- Sitemap hint for crawlers -->
  <link rel="sitemap" type="application/xml" href="https://jmsn.art/sitemap.xml">

  <!-- Bing Webmaster Tools Verification-->
  <meta name="msvalidate.01" content="FB9ACE8AB7FEC46B96561CEC1888FB39" />

  <!-- Favicon set -->
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#111111">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#111111">

  <!-- Canonical -->
  <link rel="canonical" href="https://jmsn.art/">

  <!-- SEO Meta -->
  <meta name="description" content="The Art Circle Project by Jameson McShane: digital art created in collaboration with chatJMSN, exploring halos, broken circles, and the tension between wholeness and incompleteness.">
  <meta name="keywords" content="AI art, digital art, Art Circle, broken circles, Jameson McShane, generative art, sanctified figures">
  <meta name="author" content="Jameson McShane">

  <!-- Open Graph / Social -->
  <meta property="og:title" content="jmsn.art – The Art Circle Project by Jameson McShane">
  <meta property="og:description" content="Digital art created in collaboration with chatJMSN, exploring halos, broken circles, and the Art Circle philosophy.">
  <meta property="og:image" content="https://jmsn.art/images/File%2000001.jpeg">
  <meta property="og:url" content="https://jmsn.art/">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="jmsn.art – The Art Circle Project by Jameson McShane">
  <meta name="twitter:description" content="Exploring halos, broken circles, and surreal visions through AI collaboration.">
  <meta name="twitter:image" content="https://jmsn.art/images/File%2000001.jpeg">
  <meta name="twitter:image:alt" content="Haloed Figure in Black and White by Jameson McShane">

  <!-- Preload first image to improve LCP -->
  <link rel="preload" as="image" href="images/File%2000001.jpeg" imagesrcset="images/File%2000001.jpeg" fetchpriority="high">

  <!-- Preconnect for GA -->
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FQPZNDPCGF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-FQPZNDPCGF');
  </script>

  <style>
  :root { --bg:#111; --fg:#fff; --muted:#ccc; --accent:#fff; }
  .light-mode { --bg:#fefefe; --fg:#111; --muted:#444; --accent:#111; }

  body {
    margin:0; padding:20px; background:var(--bg); color:var(--fg);
    font-family:Arial,Helvetica,sans-serif;
    transition: background 1.5s ease, color 1.5s ease;
  }

  /* focus only on keyboard nav */
  :focus { outline: none; }
  :focus-visible { outline:2px solid #888; outline-offset:2px; }

  .gallery { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
  .gallery img {
    width:100%; height:auto; display:block; border-radius:8px;
    box-shadow:0 4px 12px rgba(0,0,0,.5); cursor:pointer;
    opacity:0; transition: transform .75s ease, opacity 1.5s ease-in-out;
    transform-origin:center center; will-change:transform;
    aspect-ratio: 4 / 5; object-fit: cover; /* Reserve space before load (no CLS) */
  }
  /* lighter shadows in light mode */
  .light-mode .gallery img { box-shadow: 0 2px 8px rgba(0,0,0,.18); }

  .gallery img.lazy-loaded { opacity:1; }

  @media (hover:hover) and (pointer:fine) {
    .gallery img:hover { transform: scale(1.04); }
    .gallery img:focus-visible { transform: scale(1.04); }
  }
  @media (prefers-reduced-motion: reduce) { .gallery img { transition: opacity .01s linear; } }

  /* Lightbox */
  .lb {
    position:fixed; inset:0; background:rgba(0,0,0,.92); z-index:9999;
    align-items:center; justify-content:center; display:flex;
    opacity:0; pointer-events:none; transition:opacity .75s ease;
  }
  .lb.open { opacity:1; pointer-events:auto; }
  .lb img { display:block; max-width:92%; max-height:80vh; opacity:0; transition:opacity 1.5s ease .12s; }
  .lb.open img { opacity:1; }

  .close {
    position:fixed; top:14px; right:24px; font-size:40px; color:#fff; cursor:pointer;
    -webkit-appearance:none; appearance:none; background:transparent; border:0; line-height:1; padding:0;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  .close:focus-visible { outline:2px solid #888; outline-offset:4px; border-radius:4px; }
  .close::-moz-focus-inner { border:0; }

  .fade-in { opacity:0; animation:fadeIn .8s forwards }
  @keyframes fadeIn { to { opacity:1 } }

  .noscroll { overflow:hidden }

  footer { text-align:center; margin:40px 0 10px; opacity:.8; font-size:14px; letter-spacing:.2px; }
  footer button {
    background:none; border:1px solid var(--muted); color:var(--fg);
    font-size:.9em; padding:.4em .6em; margin-top:.5em; border-radius:5px; cursor:pointer;
    transition: color 1.5s ease, border-color 1.5s ease, background 1.5s ease;
  }
  footer a { color:var(--fg); text-decoration:underline; transition: color 1.5s ease; }
  footer a:hover { color:var(--accent); }

  #lb-title {
    margin-top:12px; color:#fff; background:rgba(0,0,0,.7); padding:6px 12px; font-size:14px;
    border-radius:4px; white-space:normal; text-align:center; opacity:0; transition: opacity .75s ease; pointer-events:none;
  }

  @media (prefers-reduced-motion: reduce) { .lb, .lb img { transition:none; } }

  /* --- Desktop guardrails so tiles don't get huge --- */
  @media (min-width: 900px) {
    .gallery {
      grid-template-columns: repeat(auto-fill, minmax(240px, 300px));
      justify-content: center;
      max-width: 1400px;
      margin: 0 auto;
    }
  }

  /* --- Phone: exactly one column & comfy fit on iPhone SE --- */
  @media (max-width: 420px) {
    body { padding: 12px; }
    .gallery { grid-template-columns: 1fr; gap: 12px; }
    .gallery img { border-radius: 6px; }
    .lb img { max-width: 94%; max-height: 76vh; }
  }
  </style>
</head>
<body>

  <!-- Visually hidden H1 for accessibility/SEO -->
  <h1 style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
    The Art Circle Project – jmsn.art by Jameson McShane
  </h1>

  <div class="gallery" id="gallery">
    <!-- First image: eager load for LCP; everything else is added via JS -->
    <img src="images/File%2000001.jpeg" alt="Haloed Figure in Black and White by Jameson McShane"
         decoding="async" fetchpriority="high" width="1200" height="1500">
  </div>

  <!-- Lightbox as an accessible dialog -->
  <div class="lb" id="lb" role="dialog" aria-modal="true" aria-labelledby="lb-title" aria-hidden="true">
    <button id="lightboxClose" class="close" aria-label="Close lightbox" title="Close lightbox">&times;</button>
    <div id="lb-content" style="text-align:center; display:flex; flex-direction:column; align-items:center;">
      <img id="lbimg" alt="" tabindex="-1">
      <div id="lb-title" aria-live="polite"></div>
    </div>
  </div>

  <!-- Noscript fallback: hide lightbox if JS is off -->
  <noscript><style>.lb{display:none}</style></noscript>

  <footer>
    © 2025 Jameson McShane - The Art Circle Project ·
    <a href="about.html" style="margin-right:10px">About</a>
    <a href="contact.html">Contact</a>
    <br><br>
    <button id="toggleTheme" aria-label="Toggle light/dark mode" aria-pressed="false">☀️ / 🌙</button>
  </footer>

  <script>
  // --- GA helper: safely emit custom or GA4-recommended events ---
  function sendGA(eventName, params) {
    try { if (typeof gtag === 'function') { gtag('event', eventName, params || {}); } } catch (e) {}
  }

  // --- Theme: apply saved or system preference & sync address bar color ---
  (function initTheme(){
    const btn = document.getElementById('toggleTheme');
    const saved = localStorage.getItem('theme');
    const preferLight = window.matchMedia('(prefers-color-scheme: light)').matches;
    const themeMeta = document.querySelector('meta[name="theme-color"]');

    function setThemeColor(isLight){ themeMeta && themeMeta.setAttribute('content', isLight ? '#fefefe' : '#111111'); }
    function apply(mode){
      const isLight = (mode === 'light');
      if (isLight) { document.body.classList.add('light-mode'); btn.setAttribute('aria-pressed','true'); }
      else { document.body.classList.remove('light-mode'); btn.setAttribute('aria-pressed','false'); }
      setThemeColor(isLight);
    }
    apply(saved ? saved : (preferLight ? 'light' : 'dark'));
    btn.addEventListener('click', ()=>{
      const isLight = document.body.classList.toggle('light-mode');
      btn.setAttribute('aria-pressed', String(isLight));
      localStorage.setItem('theme', isLight ? 'light' : 'dark');
      setThemeColor(isLight);
    });
  })();

  // --- Gallery / Lightbox ---
  document.addEventListener('DOMContentLoaded', () => {
    const gallery = document.getElementById('gallery');
    const lb = document.getElementById('lb');
    const lbimg = document.getElementById('lbimg');
    const closeBtn = document.getElementById('lightboxClose');
    const lbTitle = document.getElementById('lb-title');

    // Map of custom ALT titles for known works (fallback auto-generated for others)
    const ALT_TITLES = {
      "000002":"Human and Robot, Contrasting Forces by Jameson McShane",
      "000003":"Leaky Bucket with Water Spill by Jameson McShane",
      "000004":"Medieval-Inspired Golden Haloed Figures by Jameson McShane",
      "000006":"Pop Art Billboard on Suburban Highway by Jameson McShane",
      "000007":"Roto Dorado en Mosaico by Jameson McShane",
      "000008":"Sacred Canine in Haloed Glory by Jameson McShane",
      "000009":"Sacred Reflection of Child and Dog by Jameson McShane",
      "000011":"The Circle of Conflict by Jameson McShane",
      "000012":"Stealth Bombers Over Eastern Europe by Jameson McShane",
      "000013":"Sunset and Satellite Dish Silhouette by Jameson McShane",
      "000014":"Surreal Dining with Man and Puppy by Jameson McShane",
      "000015":"Vibrant Canola Field in Afternoon Light by Jameson McShane",
      "000029":"Broken Circle with Objects by Jameson McShane",
      "000030":"Buddha's Serenity Amidst the City by Jameson McShane",
      "000032":"Light Circle Around a Column by Jameson McShane",
      "000033":"Golden Circle and Shark Teeth by Jameson McShane",
      "000035":"Circular Roadway Interchange in a Dry Landscape by Jameson McShane",
      "000040":"Damaged SUV in Target Lot by Jameson McShane",
      "000052":"Ethereal Figures with Ornate Halos by Jameson McShane",
      "000057":"Glowing Arc of Ember Light by Jameson McShane",
      "000066":"Golden Circle with Radiating Light by Jameson McShane",
      "000068":"Golden Glow and Sleeping Circle by Jameson McShane",
      "000077":"Golden Halo on Aged Background by Jameson McShane",
      "000078":"Golden Halo on White Background by Jameson McShane",
      "000080":"Golden Halo Over Silent Figure by Jameson McShane",
      "000083":"Golden Halos and Graceful Hands by Jameson McShane",
      "000092":"Labradors in Glowing Halos by Jameson McShane",
      "000102":"Puppy and Diamond Skull Halo by Jameson McShane",
      "000112":"Sacred Silhouettes in Gilded Reverence by Jameson McShane",
      "000113":"Sacred Silhouettes on Parchment Backdrop by Jameson McShane",
      "000121":"Sisters in Golden Halo Light by Jameson McShane",
      "000125":"Stealth Aircraft Against Yellow Halo by Jameson McShane",
      "000138":"Whale, Dog, and Meatloaf in Harmony by Jameson McShane",
      "000140":"Diverse Group in Gym Circle by Jameson McShane"
    };

    // Add all images in a range, auto-skipping missing files
    function addImagesRange(container, startNum, endNum) {
      for (let n = startNum; n <= endNum; n++) {
        if (n === 1) continue; // #1 is already eager-loaded for LCP
        const id = String(n).padStart(6,'0');
        const src = `images/File%20${id}.jpeg`;
        const img = document.createElement('img');
        img.loading = 'lazy';
        img.decoding = 'async';
        img.width = 1200;
        img.height = 1500;
        img.setAttribute('fetchpriority','low');
        img.alt = ALT_TITLES[id] || `Artwork ${id} by Jameson McShane`;
        img.src = src;

        // if the file doesn't exist, remove silently
        img.onerror = () => { img.remove(); };
        // nice fade when it loads
        img.addEventListener('load', () => img.classList.add('lazy-loaded'));

        container.appendChild(img);
      }
    }

    // Populate: adjust end number if you add more files later
    addImagesRange(gallery, 1, 140);

    // Fisher–Yates shuffle (except first image to preserve LCP)
    function shuffleExceptFirst(container) {
      const arr = Array.from(container.querySelectorAll('img'));
      if (arr.length <= 2) return;
      const first = arr.shift();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      container.replaceChildren(first, ...arr);
    }
    shuffleExceptFirst(gallery);

    // Re-query after generation + shuffle
    const items = gallery.querySelectorAll('img');

    // One-liner responsive sizes hint
    items.forEach(img => { img.sizes = '(min-width: 900px) 300px, 92vw'; });

    // Make images operable by keyboard
    items.forEach(img => {
      if (img.complete) img.classList.add('lazy-loaded');
      img.tabIndex = 0;
      img.setAttribute('role', 'button');
      img.setAttribute('aria-label', (img.alt || 'Artwork') + ' — open');
    });

    function bestSrc(el) { return el.dataset.full || el.src; }
    function idFromSrc(s){ const m = /File%20(\d+)\.jpeg/i.exec(s); return (m && m[1]) ? m[1] : ''; }

    let lastFocus = null;
    let current = 0;
    let openedAt = 0;
    let currentTitle = '';
    let currentSrc = '';

    function openLightbox(index) {
      const img = items[index];
      current = index;
      currentTitle = img.alt || 'untitled';
      currentSrc = bestSrc(img);

      lbimg.src = currentSrc;
      lbimg.alt = currentTitle;
      lb.classList.add('open');
      lb.removeAttribute('aria-hidden');
      document.body.classList.add('noscroll');

      lastFocus = document.activeElement;
      setTimeout(() => closeBtn.focus(), 50);

      lbTitle.textContent = currentTitle;
      lbTitle.style.opacity = '1';
      setTimeout(() => { lbTitle.style.opacity = '0'; }, 7000);

      openedAt = Date.now();
      // Deep link hash for sharing (e.g., #img=000012)
      const id = idFromSrc(currentSrc).padStart(6,'0');
      try { history.pushState({i:index}, '', '#img='+id); } catch(e){}

      // Analytics
      sendGA('art_view', { artwork_title: currentTitle, artwork_src: currentSrc });
      sendGA('view_item', { items: [{ item_name: currentTitle, item_id: currentSrc }] });
    }

    function closeLightbox() {
      const dwell = openedAt ? Math.max(0, Math.round((Date.now() - openedAt) / 1000)) : 0;
      if (openedAt) {
        sendGA('art_close', { artwork_title: currentTitle || 'unknown', artwork_src: currentSrc || 'unknown', dwell_time_seconds: dwell });
      }
      openedAt = 0; currentTitle = ''; currentSrc = '';

      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
      document.body.classList.remove('noscroll');

      // Clean URL (remove hash)
      try { history.pushState({}, '', location.pathname + location.search); } catch(e){}

      if (lastFocus) lastFocus.focus();
    }

    function showAt(i) {
      current = (i + items.length) % items.length;
      openLightbox(current);
    }

    // Hook up images
    items.forEach((img, idx) => {
      img.addEventListener('click', () => openLightbox(idx));
      img.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openLightbox(idx); }
      });
    });

    // Close button
    closeBtn.addEventListener('click', closeLightbox);

    // Backdrop click
    lb.addEventListener('click', (e) => { if (e.target === lb) closeLightbox(); });

    // --- Touch swipe for next/prev ---
    let sx = 0, sy = 0;
    lb.addEventListener('touchstart', e => { sx = e.touches[0].clientX; sy = e.touches[0].clientY; }, {passive:true});
    lb.addEventListener('touchend', e => {
      if (!lb.classList.contains('open')) return;
      const dx = e.changedTouches[0].clientX - sx;
      const dy = e.changedTouches[0].clientY - sy;
      if (Math.abs(dx) > 40 && Math.abs(dy) < 40) { dx < 0 ? showAt(current + 1) : showAt(current - 1); }
    }, {passive:true});

    // --- ESC / arrows / Home-End + focus trap while dialog is open ---
    document.addEventListener('keydown', (e) => {
      if (!lb.classList.contains('open')) return;
      if (e.key === 'Escape') { e.preventDefault(); closeLightbox(); }
      if (e.key === 'ArrowRight') { e.preventDefault(); showAt(current + 1); }
      if (e.key === 'ArrowLeft') { e.preventDefault(); showAt(current - 1); }
      if (e.key === 'Home') { e.preventDefault(); showAt(0); }
      if (e.key === 'End') { e.preventDefault(); showAt(items.length - 1); }
      if (e.key === 'Tab') {
        // trap focus between close button and image
        e.preventDefault();
        const focusables = [closeBtn, lbimg];
        const i = focusables.indexOf(document.activeElement);
        const next = e.shiftKey ? (i <= 0 ? focusables.length - 1 : i - 1) : (i >= focusables.length - 1 ? 0 : i + 1);
        focusables[next].focus();
      }
    });

    // Deep link open on load and back/forward
    function tryOpenFromHash(){
      const m = location.hash.match(/img=(\d+)/);
      if(!m) return;
      const needle = 'File%20'+m[1]+'.jpeg';
      const i = [...items].findIndex(img => (img.src || '').includes(needle));
      if (i >= 0) openLightbox(i);
    }
    window.addEventListener('popstate', () => {
      if (lb.classList.contains('open')) { closeLightbox(); }
      else { tryOpenFromHash(); }
    });
    tryOpenFromHash();
  });
  </script>
</body>
</html>
