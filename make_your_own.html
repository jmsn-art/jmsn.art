<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Your Own Art Circle</title>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FQPZNDPCCF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-FQPZNDPCCF');
    function trackGA(eventName, params={}) {
      try { if (typeof gtag==='function') gtag('event', eventName, params); } catch(e){}
    }
  </script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }

    :root {
      --bg:#000; --fg:#fff; --muted:#333;
      color-scheme: dark light;
    }
    .light-mode {
      --bg:#fefefe; --fg:#111; --muted:#aaa;
      color-scheme: dark light;
    }

    body {
      font-family: system-ui,-apple-system,sans-serif;
      background:var(--bg); color:var(--fg);
      min-height:100vh; padding:20px;
      transition: background 1.5s ease, color 1.5s ease;
    }

    /* Top bar with return + toggle */
    .topbar {
      max-width:1400px; margin:0 auto 16px;
      display:flex; align-items:center; gap:10px; justify-content:flex-start;
    }
    .cta-btn {
      display:inline-block;
      padding:.55em .9em;
      border-radius:8px;
      border:1px solid var(--muted);
      color:var(--fg);
      background:transparent;
      text-decoration:none;
      font-weight:600; letter-spacing:.3px;
      transition:background .25s ease, box-shadow .25s ease, color 1.5s ease, border-color 1.5s ease;
    }
    .cta-btn:hover {
      background:rgba(255,255,255,.08);
      box-shadow:0 4px 14px rgba(0,0,0,.25);
    }
    .light-mode .cta-btn:hover {
      background:rgba(0,0,0,.06);
    }

    .container {
      max-width:1400px; margin:0 auto;
      display:grid; grid-template-columns:400px 1fr;
      gap:40px; align-items:start;
    }

    h1 {
      grid-column:1/-1; font-size:2.5rem; margin-bottom:20px; color:var(--fg);
    }

    .controls {
      background:#111; backdrop-filter:blur(10px);
      padding:30px; border-radius:20px;
      border:1px solid var(--muted);
      position:sticky; top:20px;
      transition: background 1.5s ease, color 1.5s ease, border-color 1.5s ease;
    }
    .light-mode .controls {
      background:#f0f0f0; border-color:#ccc;
    }

    .control-group { margin-bottom:25px; }

    label {
      display:block; margin-bottom:8px;
      font-size:0.9rem; color:#999;
      text-transform:uppercase; letter-spacing:1px;
    }
    .light-mode label { color:#555; }

    input[type="range"] {
      width:100%; height:6px; background:#222;
      border-radius:3px; outline:none; -webkit-appearance:none;
    }
    .light-mode input[type="range"] { background:#ccc; }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance:none; appearance:none;
      width:18px; height:18px; background:var(--fg);
      cursor:pointer; border-radius:50%;
      box-shadow:0 0 10px rgba(255,255,255,0.5);
    }

    input[type="range"]::-moz-range-thumb {
      width:18px; height:18px; background:var(--fg);
      cursor:pointer; border-radius:50%;
      box-shadow:0 0 10px rgba(255,255,255,0.5); border:none;
    }

    input[type="color"] {
      width:100%; height:50px; border:none; border-radius:10px; cursor:pointer; background:none;
    }
    input[type="color"]::-webkit-color-swatch {
      border-radius:10px; border:2px solid var(--muted);
    }

    .value-display { float:right; color:var(--fg); font-weight:bold; }

    .button-group {
      display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:30px;
    }

    button {
      padding:15px; border:none; border-radius:10px;
      font-size:1rem; font-weight:bold; cursor:pointer;
      transition:all .3s ease; text-transform:uppercase; letter-spacing:1px;
    }
    .btn-primary {
      background:var(--fg); color:var(--bg);
    }
    .btn-primary:hover {
      transform:translateY(-2px);
      box-shadow:0 5px 20px rgba(255,255,255,0.4);
    }
    .btn-secondary {
      background:#222; color:var(--fg); border:1px solid var(--muted);
    }
    .btn-secondary:hover { background:#333; }

    .canvas-area {
      background:var(--bg); border-radius:20px; padding:40px; min-height:600px;
      border:1px solid #222; overflow:hidden;
      transition:background 1.5s ease, border-color 1.5s ease;
    }

    #artCanvas { width:100%; height:100%; min-height:500px; }

    .preset-buttons {
      display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:15px;
    }
    .preset-btn {
      padding:8px; font-size:0.8rem;
      background:#222; border:1px solid var(--muted);
      border-radius:5px; color:var(--fg);
      cursor:pointer; transition:all .2s ease;
    }
    .preset-btn:hover { background:#333; transform:scale(1.05); }

    @media (max-width:1024px){
      .container{grid-template-columns:1fr;}
      .controls{position:static;}
    }
  </style>
</head>
<body>

  <!-- Return + Toggle -->
  <div class="topbar">
    <a href="/" class="cta-btn" aria-label="Return to jmsn.art">‚Üê Return to jmsn.art</a>
    <a href="/circles.html" class="cta-btn" aria-label="Back to circles">‚Üê Back to circles</a>
    <button id="toggleTheme" class="cta-btn" type="button" aria-label="Toggle light/dark mode" aria-pressed="false">‚òÄÔ∏è / üåô</button>
  </div>

  <div class="container">
    <h1>Create Your Own Art Circle Study (best on desktop)</h1>
    
    <div class="controls">
      <!-- All your controls exactly the same -->
      <!-- (‚Ä¶ unchanged controls markup ‚Ä¶) -->
      <!-- GAP SIZE -->
      <div class="control-group">
        <label>Gap Size <span class="value-display" id="gapValue">30¬∞</span></label>
        <input type="range" id="gapSize" min="5" max="90" value="30" step="1">
      </div>
      <!-- repeat all the other control groups exactly as before ‚Ä¶ -->
      <!-- (for brevity omitted but copy from your current file) -->

      <!-- Presets -->
      <div class="control-group">
        <label>Presets</label>
        <div class="preset-buttons">
          <button class="preset-btn" onclick="applyPreset('minimal')">Minimal</button>
          <button class="preset-btn" onclick="applyPreset('neon')">Neon</button>
          <button class="preset-btn" onclick="applyPreset('zen')">Zen</button>
          <button class="preset-btn" onclick="applyPreset('bold')">Bold</button>
          <button class="preset-btn" onclick="applyPreset('subtle')">Subtle</button>
          <button class="preset-btn" onclick="applyPreset('cosmic')">Cosmic</button>
        </div>
      </div>

      <div class="button-group">
        <button class="btn-primary" onclick="downloadSVG()">Download SVG</button>
        <button class="btn-primary" onclick="downloadPNG()">Download PNG</button>
        <button class="btn-secondary" onclick="randomize()">Randomize</button>
        <button class="btn-secondary" onclick="reset()">Reset</button>
      </div>
    </div>

    <div class="canvas-area" id="canvasArea">
      <svg id="artCanvas" viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
        <g id="circlesContainer"></g>
      </svg>
    </div>
  </div>

  <script>
    // Theme toggle (same as circles.html)
    (function initTheme(){
      const btn=document.getElementById('toggleTheme');
      const saved=localStorage.getItem('theme');
      const preferLight=window.matchMedia('(prefers-color-scheme: light)').matches;
      function apply(mode){
        if(mode==='light'){document.body.classList.add('light-mode');btn.setAttribute('aria-pressed','true');}
        else{document.body.classList.remove('light-mode');btn.setAttribute('aria-pressed','false');}
      }
      apply(saved?saved:(preferLight?'light':'dark'));
      btn.addEventListener('click',()=>{
        const isLight=document.body.classList.toggle('light-mode');
        btn.setAttribute('aria-pressed',String(isLight));
        localStorage.setItem('theme',isLight?'light':'dark');
        trackGA('theme_toggle',{mode:isLight?'light':'dark'});
      });
    })();

    // All your SVG drawing code exactly as before ‚Ä¶
    // (use your current JS but add GA tracking calls)

    function downloadSVG(){ /* your existing code */ trackGA('download_svg'); /* existing code below */ }
    function downloadPNG(){ /* your existing code */ trackGA('download_png'); /* existing code below */ }
    function randomize(){ /* your existing code */ trackGA('randomize'); /* existing code below */ }
    function reset(){ /* your existing code */ trackGA('reset'); /* existing code below */ }

    function applyPreset(preset){ /* your existing code */ trackGA('preset_applied',{name:preset}); /* existing code below */ }

    // keep your updateCircle() etc. unchanged
  </script>
</body>
</html>
