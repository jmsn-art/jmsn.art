<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Contact ‚Äî jmsn.art</title>

  <!-- Canonical -->
  <link rel="canonical" href="https://jmsn.art/contact.html">

  <!-- Favicon & PWA (match site) -->
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#111111">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#111111">

  <!-- Robots -->
  <meta name="robots" content="index,follow,max-image-preview:large">

  <!-- SEO Meta -->
  <meta name="description" content="Contact Jameson McShane about The Art Circle Project. This form opens your own email app‚Äîno data stored on the site.">
  <meta name="author" content="Jameson McShane">

  <!-- Social -->
  <meta property="og:title" content="Contact ‚Äî jmsn.art">
  <meta property="og:description" content="Send a note about The Art Circle Project. Your email app opens locally; nothing is stored on the website.">
  <meta property="og:url" content="https://jmsn.art/contact.html">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://jmsn.art/images/File%2000001.jpeg">
  <meta name="twitter:card" content="summary_large_image">

  <!-- JSON-LD (page-scoped) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "ContactPage",
        "@id": "https://jmsn.art/contact.html#page",
        "name": "Contact ‚Äî jmsn.art",
        "url": "https://jmsn.art/contact.html",
        "isPartOf": { "@id": "https://jmsn.art/#website" },
        "inLanguage": "en-US",
        "about": { "@id": "https://jmsn.art/#person" },
        "mainEntity": { "@id": "https://jmsn.art/#person" }
      },
      {
        "@type": "Person",
        "@id": "https://jmsn.art/#person",
        "name": "Jameson McShane",
        "url": "https://jmsn.art/about.html",
        "image": "https://jmsn.art/images/File%2000001.jpeg",
        "email": "mailto:contact@jmsn.art"
      },
      {
        "@type": "BreadcrumbList",
        "itemListElement": [
          { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://jmsn.art/" },
          { "@type": "ListItem", "position": 2, "name": "Contact", "item": "https://jmsn.art/contact.html" }
        ]
      }
    ]
  }
  </script>

  <!-- GA -->
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FQPZNDPCCF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date()); 
    gtag('config', 'G-FQPZNDPCCF');
    function sendGA(eventName, params){ try { if (typeof gtag === 'function') gtag('event', eventName, params || {}); } catch(e){} }
  </script>

  <style>
    :root{--bg:#111;--fg:#fff;--muted:#ccc;--accent:#fff;--err:#ff6b6b;--ok:#4caf50;color-scheme: dark light}
    .light-mode{--bg:#fefefe;--fg:#111;--muted:#444;--accent:#444;color-scheme: dark light}
    
    /* Screen reader only */
    .sr-only {
      position: absolute !important;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; 
      clip: rect(0, 0, 0, 0);
      white-space: nowrap; 
      border: 0;
    }
    
    /* Skip link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--bg);
      color: var(--fg);
      padding: 8px;
      text-decoration: none;
      border: 2px solid var(--fg);
      z-index: 100;
    }
    .skip-link:focus {
      top: 0;
    }
    
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:flex;min-height:100vh;transition:background 1.2s ease,color 1.2s ease}
    .wrap{max-width:720px;margin:auto;padding:32px 20px;width:100%}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand a{color:var(--fg);text-decoration:none;transition: opacity 0.3s ease;}
    .brand a:hover{opacity: 0.7;}
    #toggleTheme{background:none;border:1px solid #444;color:var(--fg);padding:.35em .55em;border-radius:6px;cursor:pointer;transition: background 0.3s ease, border-color 1.2s ease;}
    #toggleTheme:hover{background: rgba(255,255,255,0.05);}
    #toggleTheme:focus-visible{outline: 2px solid var(--fg); outline-offset: 2px;}
    h1{margin:0 0 6px;font-size:28px;letter-spacing:.3px}
    p.sub{margin:0 0 16px;color:var(--muted)}
    form{display:grid;gap:14px}
    label span{display:block;font-size:13px;margin:0 0 6px;color:var(--muted)}
    input,textarea{width:100%;padding:12px 14px;border:1px solid #2a2a2a;background:#151515;color:var(--fg);border-radius:10px;outline:none;transition:border-color .3s ease,box-shadow .3s ease,background-position .3s ease;background-repeat:no-repeat;background-position:right 12px center;background-size:18px 18px;-webkit-tap-highlight-color:transparent}
    input.err,textarea.err{border-color:var(--err);box-shadow:0 0 6px rgba(255,107,107,.6);background-image:none}
    input.ok-field,textarea.ok-field{border-color:var(--ok);box-shadow:0 0 6px rgba(76,175,80,.6);background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%234caf50'><path d='M16.7 5.3a1 1 0 010 1.4l-7.8 7.8a1 1 0 01-1.4 0L3.3 10a1 1 0 011.4-1.4l3.2 3.2 7.1-7.1a1 1 0 011.4 0z'/></svg>")}
    textarea{min-height:140px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width: 560px){.row{grid-template-columns:1fr}}
    .err-msg{display:none;font-size:12px;color:var(--err);margin-top:6px;opacity:0;transition:opacity .3s ease}
    .err-msg.show{display:block;opacity:1}
    
    .char-counter {
      font-size: 11px;
      color: var(--muted);
      text-align: right;
      margin-top: 4px;
      opacity: 0.7;
    }
    
    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    button{padding:12px 16px;border:0;border-radius:12px;background:var(--accent);color:#000;font-weight:700;cursor:pointer;box-shadow:0 4px 14px rgba(0,0,0,.35);transition:background .3s ease, transform .2s ease}
    button:hover{transform:translateY(-1px)}
    button:disabled{opacity:.6;cursor:not-allowed;transform:none;}
    button.secondary{background:transparent;border:1px solid var(--muted);color:var(--fg);box-shadow:none;}
    button.secondary:hover{background:rgba(255,255,255,0.05);}
    
    .copy-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      font-size: 14px;
      background: transparent;
      border: 1px solid var(--muted);
      color: var(--fg);
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .copy-btn:hover {
      background: rgba(255,255,255,0.05);
      transform: none;
    }
    .copy-btn.copied {
      border-color: var(--ok);
      color: var(--ok);
    }
    
    .note{font-size:12px;color:var(--muted)}
    .ok{display:none;margin-top:10px;font-size:14px;padding:12px;background:rgba(76,175,80,0.1);border:1px solid var(--ok);border-radius:8px;}
    footer{margin-top:26px;text-align:center;color:var(--muted);font-size:13px}
    a{color:var(--fg);transition: opacity 0.3s ease;}
    a:hover{opacity: 0.7;}
    a:focus-visible{outline: 2px solid var(--fg); outline-offset: 2px; border-radius: 2px;}
    
    @media (prefers-reduced-motion: reduce){*{transition:none !important;animation:none !important}}
    
    /* Light mode fixes */
    .light-mode input,
    .light-mode textarea {
      background: #fff;
      color: #111;
      border-color: #ddd;
    }

    input, textarea { caret-color: currentColor; }

    .light-mode input::placeholder,
    .light-mode textarea::placeholder { color: #777; }

    .light-mode input.err,
    .light-mode textarea.err {
      border-color: var(--err);
      box-shadow: 0 0 6px rgba(255,107,107,.35);
    }

    .light-mode input.ok-field,
    .light-mode textarea.ok-field {
      border-color: var(--ok);
      box-shadow: 0 0 6px rgba(76,175,80,.3);
    }
    
    /* Smooth unified transitions */
    :where(body, body *, input, textarea, button) {
      transition-property: color, background-color, border-color, box-shadow, fill, stroke, opacity;
      transition-duration: 1.2s;
      transition-timing-function: ease;
    }

    img, video, canvas { transition: none !important; }

    input, textarea {
      transition: background-color 1.2s ease, color 1.2s ease, border-color 1.2s ease, box-shadow 1.2s ease;
      caret-color: currentColor;
    }

    button {
      transition: background-color 1.2s ease, color 1.2s ease, border-color 1.2s ease, box-shadow 1.2s ease, transform 0.2s ease;
    }

    input.err, textarea.err {
      border-color: var(--err);
      box-shadow: 0 0 6px rgba(255, 107, 107, 0.35);
    }

    input.ok-field, textarea.ok-field {
      border-color: var(--ok);
      box-shadow: 0 0 6px rgba(76, 175, 80, 0.3);
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to contact form</a>
  
  <div class="wrap">
    <header>
      <div class="brand"><a href="/">‚Üê jmsn.art</a></div>
      <button id="toggleTheme" aria-label="Toggle light/dark mode" aria-pressed="false">‚òÄÔ∏è / üåô</button>
    </header>

    <main id="main-content">
      <h1>Contact</h1>
      <p class="sub">Send me a note ‚Äî your email app will open with everything filled in. No information is stored on this site.</p>

      <form id="contactForm" novalidate>
        <div class="row">
          <label for="name">
            <span>Your Name</span>
            <input type="text" id="name" name="name" placeholder="e.g., Jane Doe" autocomplete="name" inputmode="text" aria-describedby="err-name">
            <div class="err-msg" id="err-name" role="alert">Please add your name.</div>
          </label>
          <label for="email">
            <span>Your Email</span>
            <input type="email" id="email" name="email" placeholder="e.g., jane@example.com" autocomplete="email" inputmode="email" aria-describedby="err-email">
            <div class="err-msg" id="err-email" role="alert">Please enter a valid email.</div>
          </label>
        </div>
        <label for="subject">
          <span>Subject (optional)</span>
          <input type="text" id="subject" name="subject" placeholder="e.g., Commission inquiry" autocomplete="off" aria-describedby="err-subject">
          <div class="err-msg" id="err-subject" role="alert"></div>
        </label>
        <label for="message">
          <span>Message</span>
          <textarea id="message" name="message" placeholder="Tell me about your project, question, or just say hello..." aria-describedby="err-message char-count"></textarea>
          <div class="char-counter" id="char-count" aria-live="polite">0 characters</div>
          <div class="err-msg" id="err-message" role="alert">Please add a message.</div>
        </label>
        <div class="btn-group">
          <button type="submit" id="sendBtn">Send Message</button>
          <button type="button" id="resetBtn" class="secondary">Clear Form</button>
        </div>
        <div class="note">This opens your device's email app (no data stored on the site).</div>
        <div class="ok" id="okMsg" role="status">
          ‚úì Opening your email app‚Ä¶ 
          <br><br>
          If nothing happens: <button type="button" class="copy-btn" id="copyEmailBtn">üìã Copy Email Address</button>
          <br><br>
          Or email directly: <a id="safeEmail" href="#"></a>
          <noscript>
            <br>Email: <a href="mailto:contact@jmsn.art">contact@jmsn.art</a>
          </noscript>
        </div>
      </form>
    </main>

    <footer>¬© <span id="y"></span> Jameson McShane ¬∑ <a href="/">Back to gallery</a></footer>
  </div>

  <!-- Accessibility announcer -->
  <div class="sr-only" id="a11yAnnouncer" aria-live="assertive" aria-atomic="true"></div>

<script>
  // Safe localStorage wrapper
  const storage = {
    get: (key) => {
      try { return localStorage.getItem(key); } catch(e) { return null; }
    },
    set: (key, val) => {
      try { localStorage.setItem(key, val); } catch(e) {}
    }
  };

  const announcer = document.getElementById('a11yAnnouncer');

  // Track page metrics
  const pageLoadTime = Date.now();
  const fieldInteractions = {};
  const validationErrors = {};

  // Theme toggle
  (function initTheme(){
    const btn = document.getElementById('toggleTheme');
    const saved = storage.get('theme');
    const preferLight = window.matchMedia('(prefers-color-scheme: light)').matches;
    
    function apply(mode){
      if (mode === 'light') { 
        document.body.classList.add('light-mode'); 
        btn.setAttribute('aria-pressed','true'); 
      } else { 
        document.body.classList.remove('light-mode'); 
        btn.setAttribute('aria-pressed','false'); 
      }
    }
    
    apply(saved ? saved : (preferLight ? 'light' : 'dark'));
    
    btn.addEventListener('click', ()=>{
      const isLight = document.body.classList.toggle('light-mode');
      const mode = isLight ? 'light' : 'dark';
      btn.setAttribute('aria-pressed', String(isLight));
      storage.set('theme', mode);
      announcer.textContent = `Theme switched to ${mode} mode`;
      sendGA('theme_toggle', { mode: mode, page: 'contact' });
    });
  })();

  // Year stamp
  document.getElementById('y').textContent = new Date().getFullYear();

  (function(){
    const f = document.getElementById('contactForm');
    const okBox = document.getElementById('okMsg');
    const btn = document.getElementById('sendBtn');
    const resetBtn = document.getElementById('resetBtn');
    const safeEmail = document.getElementById('safeEmail');
    const copyEmailBtn = document.getElementById('copyEmailBtn');
    const charCount = document.getElementById('char-count');

    // Build email dynamically (better obfuscation)
    const parts = [99,111,110,116,97,99,116,64,106,109,115,110,46,97,114,116];
    const addr = String.fromCharCode(...parts);
    safeEmail.textContent = addr;
    safeEmail.href = 'mailto:' + addr;

    // Helpers
    const $ = id => document.getElementById(id);
    
    const setErr = (inputEl, errEl, msg) => {
      if (msg) {
        inputEl.classList.add('err');
        inputEl.classList.remove('ok-field');
        inputEl.setAttribute('aria-invalid','true');
        errEl.textContent = msg;
        errEl.classList.add('show');
        announcer.textContent = `Error: ${msg}`;
        
        // Track validation error
        const fieldName = inputEl.id;
        validationErrors[fieldName] = (validationErrors[fieldName] || 0) + 1;
      } else {
        inputEl.classList.remove('err');
        inputEl.removeAttribute('aria-invalid');
        errEl.classList.remove('show');
      }
    };
    
    const setOk = (inputEl) => {
      inputEl.classList.remove('err');
      inputEl.classList.add('ok-field');
      inputEl.removeAttribute('aria-invalid');
    };

    function valEmail(e){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e); }

    function validate(){
      const name = $('name').value.trim();
      const email = $('email').value.trim();
      const message = $('message').value.trim();

      let valid = true;
      let firstError = null;
      
      if (!name){ 
        setErr($('name'), $('err-name'), 'Please add your name.'); 
        valid = false;
        if (!firstError) firstError = $('name');
      } else { 
        setErr($('name'), $('err-name'), ''); 
        setOk($('name')); 
      }

      if (!email){ 
        setErr($('email'), $('err-email'), 'Please enter your email.'); 
        valid = false;
        if (!firstError) firstError = $('email');
      } else if (!valEmail(email)){ 
        setErr($('email'), $('err-email'), 'Please enter a valid email.'); 
        valid = false;
        if (!firstError) firstError = $('email');
      } else { 
        setErr($('email'), $('err-email'), ''); 
        setOk($('email')); 
      }

      if (!message){ 
        setErr($('message'), $('err-message'), 'Please add a message.'); 
        valid = false;
        if (!firstError) firstError = $('message');
      } else { 
        setErr($('message'), $('err-message'), ''); 
        setOk($('message')); 
      }

      // Focus first error
      if (!valid && firstError) {
        firstError.focus();
      } else if (valid) {
        announcer.textContent = 'Form is valid and ready to submit';
      }

      return valid;
    }

    // Character counter
    $('message').addEventListener('input', (e) => {
      const length = e.target.value.length;
      charCount.textContent = `${length} character${length !== 1 ? 's' : ''}`;
    });

    // Track field interactions
    ['name', 'email', 'subject', 'message'].forEach(id => {
      const field = $(id);
      
      field.addEventListener('focus', () => {
        if (!fieldInteractions[id]) {
          fieldInteractions[id] = { focused: true, completed: false };
          sendGA('form_field_focus', { field: id, page: 'contact' });
        }
      });
      
      field.addEventListener('blur', () => {
        if (field.value.trim()) {
          fieldInteractions[id].completed = true;
        }
      });
      
      field.addEventListener('input', validate);
    });

    // Copy email button
    copyEmailBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(addr);
        copyEmailBtn.textContent = '‚úì Copied!';
        copyEmailBtn.classList.add('copied');
        announcer.textContent = 'Email address copied to clipboard';
        sendGA('email_copy', { method: 'clipboard', page: 'contact' });
        
        setTimeout(() => {
          copyEmailBtn.textContent = 'üìã Copy Email Address';
          copyEmailBtn.classList.remove('copied');
        }, 2000);
      } catch (err) {
        copyEmailBtn.textContent = '‚úó Failed';
        setTimeout(() => {
          copyEmailBtn.textContent = 'üìã Copy Email Address';
        }, 2000);
      }
    });

    // Reset form
    resetBtn.addEventListener('click', () => {
      f.reset();
      ['name', 'email', 'subject', 'message'].forEach(id => {
        const field = $(id);
        const errEl = $('err-' + id);
        field.classList.remove('err', 'ok-field');
        field.removeAttribute('aria-invalid');
        errEl.classList.remove('show');
      });
      charCount.textContent = '0 characters';
      okBox.style.display = 'none';
      announcer.textContent = 'Form cleared';
      sendGA('form_reset', { page: 'contact' });
    });

    // Form submission
    f.addEventListener('submit', function(e){
      e.preventDefault();
      
      if (!validate()) {
        sendGA('form_validation_failed', { 
          page: 'contact',
          errors: Object.keys(validationErrors)
        });
        return;
      }

      btn.disabled = true;

      const name = $('name').value.trim();
      const email = $('email').value.trim();
      const subject = $('subject').value.trim() || 'Message from jmsn.art';
      const message = $('message').value.trim();

      const body = `Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`;
      const mailto = `mailto:${addr}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

      // Show success message
      okBox.style.display = 'block';
      announcer.textContent = 'Opening your email application';
      window.location.href = mailto;

      // Track successful submission
      sendGA('contact_form_submit', { 
        method: 'mailto',
        page: 'contact',
        has_subject: !!$('subject').value.trim(),
        message_length: message.length
      });

      // Track completion rate
      const completionRate = Object.values(fieldInteractions).filter(f => f.completed).length / 4;
      sendGA('form_completion_rate', {
        page: 'contact',
        rate: Math.round(completionRate * 100)
      });

      setTimeout(()=> { btn.disabled = false; }, 2500);
    });

    // Track referrer source
    if (document.referrer) {
      const referrerUrl = new URL(document.referrer);
      if (referrerUrl.hostname === window.location.hostname) {
        sendGA('internal_navigation', {
          from_page: referrerUrl.pathname,
          to_page: 'contact'
        });
      }
    }

    // Track dwell time and abandonment on page unload
    window.addEventListener('beforeunload', () => {
      const dwellTime = Math.round((Date.now() - pageLoadTime) / 1000);
      const abandonedFields = Object.keys(fieldInteractions).filter(
        id => fieldInteractions[id].focused && !fieldInteractions[id].completed
      );
      
      sendGA('page_engagement', {
        page: 'contact',
        dwell_seconds: dwellTime,
        fields_interacted: Object.keys(fieldInteractions).length,
        abandoned_fields: abandonedFields,
        validation_errors: validationErrors
      });
    });
  })();
</script>
</body>
</html>
